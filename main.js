(()=>{"use strict";var e=document.createDocumentFragment(),t={};function a(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}[[{code:"Backquote",func:!1,lang:{en:"`",ru:"ё"},width:"regular"},{code:"Digit1",func:!1,lang:{en:"1",ru:"1"},width:"regular"},{code:"Digit2",func:!1,lang:{en:"2",ru:"2"},width:"regular"},{code:"Digit3",func:!1,lang:{en:"3",ru:"3"},width:"regular"},{code:"Digit4",func:!1,lang:{en:"4",ru:"4"},width:"regular"},{code:"Digit5",func:!1,lang:{en:"5",ru:"5"},width:"regular"},{code:"Digit6",func:!1,lang:{en:"6",ru:"6"},width:"regular"},{code:"Digit7",func:!1,lang:{en:"7",ru:"7"},width:"regular"},{code:"Digit8",func:!1,lang:{en:"8",ru:"8"},width:"regular"},{code:"Digit9",func:!1,lang:{en:"9",ru:"9"},width:"regular"},{code:"Digit0",func:!1,lang:{en:"0",ru:"0"},width:"regular"},{code:"Minus",func:!1,lang:{en:"-",ru:"-"},width:"regular"},{code:"Equal",func:!1,lang:{en:"=",ru:"="},width:"regular"},{code:"Backspace",func:!0,lang:{en:"⇦ Back",ru:"⇦ Back"},width:"wide"},{code:"Delete",func:!0,lang:{en:"DEL",ru:"DEL"},width:"wide"}],[{code:"Tab",func:!0,lang:{en:"Tab  ↹",ru:"Tab ↹"},width:"extra-wide"},{code:"KeyQ",func:!1,lang:{en:"q",ru:"й"},width:"regular"},{code:"KeyW",func:!1,lang:{en:"w",ru:"ц"},width:"regular"},{code:"KeyE",func:!1,lang:{en:"e",ru:"у"},width:"regular"},{code:"KeyR",func:!1,lang:{en:"r",ru:"к"},width:"regular"},{code:"KeyT",func:!1,lang:{en:"t",ru:"е"},width:"regular"},{code:"KeyY",func:!1,lang:{en:"y",ru:"н"},width:"regular"},{code:"KeyU",func:!1,lang:{en:"u",ru:"г"},width:"regular"},{code:"KeyI",func:!1,lang:{en:"i",ru:"ш"},width:"regular"},{code:"KeyO",func:!1,lang:{en:"o",ru:"щ"},width:"regular"},{code:"KeyP",func:!1,lang:{en:"p",ru:"з"},width:"regular"},{code:"BracketLeft",func:!1,lang:{en:"[",ru:"х"},width:"regular"},{code:"BracketRight",func:!1,lang:{en:"]",ru:"ъ"},width:"regular"},{code:"Backslash",func:!1,lang:{en:"\\",ru:"\\"},width:"regular"}],[{code:"CapsLock",func:!0,lang:{en:"CapsLock",ru:"CapsLock"},width:"extra-wide"},{code:"KeyA",func:!1,lang:{en:"a",ru:"ф"},width:"regular"},{code:"KeyS",func:!1,lang:{en:"s",ru:"ы"},width:"regular"},{code:"KeyD",func:!1,lang:{en:"d",ru:"в"},width:"regular"},{code:"KeyF",func:!1,lang:{en:"f",ru:"а"},width:"regular"},{code:"KeyG",func:!1,lang:{en:"g",ru:"п"},width:"regular"},{code:"KeyH",func:!1,lang:{en:"h",ru:"р"},width:"regular"},{code:"KeyJ",func:!1,lang:{en:"j",ru:"о"},width:"regular"},{code:"KeyK",func:!1,lang:{en:"k",ru:"л"},width:"regular"},{code:"KeyL",func:!1,lang:{en:"l",ru:"д"},width:"regular"},{code:"Semicolon",func:!1,lang:{en:";",ru:"ж"},width:"regular"},{code:"Quote",func:!1,lang:{en:"'",ru:"э"},width:"regular"},{code:"Enter",func:!0,lang:{en:"⏎ Enter",ru:"⏎ Enter"},width:"extra-wide"}],[{code:"ShiftLeft",func:!0,lang:{en:"⇧ Shift",ru:"⇧ Shift"},width:"extra-wide"},{code:"KeyZ",func:!1,lang:{en:"z",ru:"я"},width:"regular"},{code:"KeyX",func:!1,lang:{en:"x",ru:"ч"},width:"regular"},{code:"KeyC",func:!1,lang:{en:"c",ru:"с"},width:"regular"},{code:"KeyV",func:!1,lang:{en:"v",ru:"м"},width:"regular"},{code:"KeyB",func:!1,lang:{en:"b",ru:"и"},width:"regular"},{code:"KeyN",func:!1,lang:{en:"n",ru:"т"},width:"regular"},{code:"KeyM",func:!1,lang:{en:"m",ru:"ь"},width:"regular"},{code:"Comma",func:!1,lang:{en:",",ru:"б"},width:"regular"},{code:"Period",func:!1,lang:{en:".",ru:"ю"},width:"regular"},{code:"Slash",func:!1,lang:{en:"/",ru:"."},width:"regular"},{code:"ArrowUp",func:!0,lang:{en:"⯅",ru:"⯅"},width:"regular"},{code:"ShiftRight",func:!0,lang:{en:"⇧ Shift",ru:"⇧ Shift"},width:"extra-wide"}],[{code:"ControlLeft",func:!0,lang:{en:"Ctrl",ru:"Ctrl"},width:"wide"},{code:"AltLeft",func:!0,lang:{en:"Alt",ru:"Alt"},width:"wide"},{code:"Space",func:!1,lang:{en:" ",ru:" "},width:"ultra-wide"},{code:"AltRight",func:!0,lang:{en:"Alt",ru:"Alt"},width:"wide"},{code:"ControlRight",func:!0,lang:{en:"Ctrl",ru:"Ctrl"},width:"wide"},{code:"ArrowLeft",func:!0,lang:{en:"⯇",ru:"⯇"},width:"regular"},{code:"ArrowDown",func:!0,lang:{en:"⯆",ru:"⯆"},width:"regular"},{code:"ArrowRight",func:!0,lang:{en:"⯈",ru:"⯈"},width:"regular"}]].forEach((function(a){var n=document.createElement("div");n.classList.add("row"),a.forEach((function(e){t[e.code]=e.lang,t[e.code].func=e.func;var a=document.createElement("button");a.setAttribute("id",e.code),a.setAttribute("type","button"),a.textContent=e.lang.en,a.classList.add("btnKeyboard"),a.classList.add("".concat(e.width)),n.appendChild(a)})),e.appendChild(n)}));var n=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.langLocalStorage="ru"===localStorage.getItem("lang")?"ru":"en",this.capsLock=!1}var r,i;return r=n,i=[{key:"init",value:function(){this.div=document.createElement("div"),this.div.classList.add("root"),document.body.appendChild(this.div),this.title=document.createElement("h1"),this.title.classList.add("title"),this.title.textContent="RSS Виртуальная клавиатура",this.div.appendChild(this.title),this.textarea=document.createElement("textarea"),this.textarea.autofocus=!0,this.textarea.classList.add("textarea"),this.div.appendChild(this.textarea),this.keyBrd=document.createElement("div"),this.keyBrd.classList.add("keyBrd"),this.keyBrd.appendChild(e),this.div.appendChild(this.keyBrd),document.createElement("div").classList.add("row"),this.comment=document.createElement("p"),this.comment.classList.add("comments"),this.comment.textContent="Клавиатура создана в операционной системе Windows",this.div.appendChild(this.comment),this.comment=document.createElement("p"),this.comment.classList.add("comments"),this.comment.textContent="Для переключения языка комбинация: левыe Ctrl+Alt",this.div.appendChild(this.comment),this.language(this.langLocalStorage),this.create()}},{key:"create",value:function(){var e=this;document.addEventListener("keyup",(function(t){var a=document.getElementById(t.code);a?"CapsLock"!==t.code&&(a.classList.remove("active"),"Shift"===t.key&&(t.preventDefault(),e.capsLockSwitch(t.shiftKey))):t.preventDefault()})),document.addEventListener("keydown",(function(a){var n=document.getElementById(a.code);n?"CapsLock"!==a.code||a.repeat?(n.classList.add("active"),(a.ctrlKey||a.metaKey)&&a.altKey&&!a.repeat?(a.preventDefault(),e.langLocalStorage="ru"===e.langLocalStorage?"en":"ru",e.language(e.langLocalStorage,a.shiftKey),localStorage.setItem("lang",e.langLocalStorage)):"Enter"===a.code?(a.preventDefault(),e.insert("\n")):"Delete"===a.code?(a.preventDefault(),e.delete()):t[a.code].func?"Tab"===a.code?(a.preventDefault(),e.insert("\t")):"Backspace"===a.code?(a.preventDefault(),e.backspace()):"ArrowDown"!==a.code||a.isTrusted?"ArrowUp"!==a.code||a.isTrusted?"ArrowLeft"!==a.code||a.isTrusted?"Shift"!==a.key||a.repeat?"ArrowRight"!==a.code||a.isTrusted||e.arrowRight():(a.preventDefault(),e.capsLockSwitch(a.shiftKey)):e.arrowLeft():e.arrowUp():e.arrowDown():(a.preventDefault(),e.insert(n.textContent))):(a.preventDefault(),e.capsLock=!e.capsLock,e.capsLock?n.classList.add("active"):n.classList.remove("active"),e.capsLockSwitch(a.shiftKey)):a.preventDefault()})),this.keyBrd.addEventListener("click",(function(t){e.textarea.focus();var a=new KeyboardEvent("keydown",{view:window,bubbles:!0,code:t.target.id,cancelable:!0});document.dispatchEvent(a),e.textarea.focus();var n=new KeyboardEvent("keyup",{view:window,bubbles:!0,code:t.target.id,cancelable:!0});document.dispatchEvent(n)})),this.textarea.addEventListener("blur",(function(){setTimeout((function(){e.textarea.focus()}),0)}))}},{key:"language",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Array.from(this.keyBrd.querySelectorAll(".btnKeyboard")).forEach((function(a){a.textContent=t[a.id][e]})),this.capsLockSwitch(a)}},{key:"capsLockSwitch",value:function(e){var a=this,n=this.capsLock&&!e||!this.capsLock&&e?"toUpperCase":"toLowerCase";Array.from(this.keyBrd.querySelectorAll(".btnKeyboard")).forEach((function(r){t[r.id].func||("Backquote"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"~":"`":"BracketRight"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"}":"]":"Quote"===r.id&&"en"===a.langLocalStorage?r.textContent=e?'"':"'":"Minus"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"_":"-":"BracketLeft"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"{":"[":"Equal"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"+":"=":"Backslash"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"|":"\\":"Semicolon"===r.id&&"en"===a.langLocalStorage?r.textContent=e?":":";":"Period"===r.id&&"en"===a.langLocalStorage?r.textContent=e?">":".":"Slash"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"?":"/":"Comma"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"<":",":"Slash"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?",":".":"Digit1"===r.id&&"en"===a.langLocalStorage||"Digit1"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?"!":"1":"Digit2"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"@":"2":"Digit2"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?'"':"2":"Digit3"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"#":"3":"Digit3"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?"№":"3":"Digit4"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"$":"4":"Digit4"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?";":"4":"Digit5"===r.id&&"en"===a.langLocalStorage||"Digit5"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?"%":"5":"Digit6"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"^":"6":"Digit6"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?":":"6":"Digit7"===r.id&&"en"===a.langLocalStorage?r.textContent=e?"&":"7":"Digit7"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?"?":"7":"Digit8"===r.id&&"en"===a.langLocalStorage||"Digit8"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?"*":"8":"Digit9"===r.id&&"en"===a.langLocalStorage||"Digit9"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?"(":"9":"Digit0"===r.id&&"en"===a.langLocalStorage||"Digit0"===r.id&&"ru"===a.langLocalStorage?r.textContent=e?")":"0":r.textContent=r.textContent[n]())}))}},{key:"insert",value:function(e){var t=this.textarea.selectionStart;this.textarea.value=this.textarea.value.slice(0,t)+e+this.textarea.value.slice(this.textarea.selectionEnd),this.textarea.selectionStart=t+e.length,this.textarea.selectionEnd=this.textarea.selectionStart}},{key:"backspace",value:function(){if(this.textarea.selectionStart!==this.textarea.selectionEnd)this.insert("");else{var e=Math.max(0,this.textarea.selectionStart-1);this.textarea.value=this.textarea.value.slice(0,e)+this.textarea.value.slice(this.textarea.selectionEnd),this.textarea.selectionStart=e,this.textarea.selectionEnd=this.textarea.selectionStart}}},{key:"arrowLeft",value:function(){this.textarea.selectionStart=Math.max(0,this.textarea.selectionStart-1),this.textarea.selectionEnd=this.textarea.selectionStart}},{key:"arrowRight",value:function(){this.textarea.selectionStart=Math.min(this.textarea.textLength,this.textarea.selectionEnd+1),this.textarea.selectionEnd=this.textarea.selectionStart}},{key:"arrowUp",value:function(){this.textarea.selectionStart=0,this.textarea.selectionEnd=this.textarea.selectionStart}},{key:"arrowDown",value:function(){this.textarea.selectionEnd=this.textarea.textLength,this.textarea.selectionStart=this.textarea.selectionEnd}},{key:"delete",value:function(){if(this.textarea.selectionStart!==this.textarea.selectionEnd)this.insert("");else{var e=this.textarea.selectionStart;this.textarea.value=this.textarea.value.slice(0,e)+this.textarea.value.slice(e+1),this.textarea.selectionStart=e,this.textarea.selectionEnd=this.textarea.selectionStart}}}],i&&a(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),n}();window.addEventListener("DOMContentLoaded",(function(){(new n).init()}))})();